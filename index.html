<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Searchable Data</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/3.4.0/css/fixedHeader.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/searchpanes/2.2.0/css/searchPanes.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/select/1.7.0/css/select.dataTables.min.css">

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/fixedheader/3.4.0/js/dataTables.fixedHeader.min.js"></script>
  <script src="https://cdn.datatables.net/searchpanes/2.2.0/js/dataTables.searchPanes.min.js"></script>
  <script src="https://cdn.datatables.net/select/1.7.0/js/dataTables.select.min.js"></script>
</head>
<body>
  <h2 style="text-align:center;">ðŸ“Š Inflation Data Search</h2>
  <h3 id="sheetTitle" style="text-align:center;"></h3>

  <table id="myTable" class="display" style="width:100%"></table>

  <script>
    const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQWypNkAWtjzGTCzkaGisWnQvpH4w5oTzMiFLrAe_HwICSHzkh9hbRa06lC2eOzbamIxqHpJBJL_FBp/pub?output=csv";

    async function loadCSV() {
      const response = await fetch(csvUrl);
      const data = await response.text();
      const rows = data.split("\n").map(r => r.split(","));

      // Row 1 = Title, Row 2 = Headers
      const titleRow = rows[0];
      const headers = rows[1];
      const tableData = rows.slice(2);

      $('#myTable').DataTable({
        data: tableData,
        columns: headers.map(h => ({ title: h })),
        pageLength: 100,
        fixedHeader: true,
        searchPanes: {
          cascadePanes: true,
          initCollapsed: true
        },
        dom: 'Plfrtip'   // âœ… Filter panel + length + search + pagination
      });

      // Row 1 ka title 2nd heading me show karo
      document.getElementById("sheetTitle").innerText = titleRow[0];
    }

    loadCSV();
  </script>
</body>
</html>
